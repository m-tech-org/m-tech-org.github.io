name: Deploy Develop Branch

on:
  push:
    branches:
      - develop # or master, depending on your primary branch name
  workflow_dispatch: # Allows manual trigger from the GitHub UI

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest

    # Permissions are crucial for the deployment step to succeed
    permissions:
      pages: write      # For the deployment to GitHub Pages
      id-token: write   # For OIDC authentication, required by the actions/deploy-pages action

    steps:
      - name: âš™ï¸ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ› ï¸ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22' # Use a stable Node.js version
          cache: 'npm'       # Caches npm dependencies for faster builds

      - name: ğŸ“¦ Install Dependencies
        run: npm ci

      - name: ğŸ—ï¸ Build Project
        # This runs your standard React build script (which usually generates a 'build' folder)
        run: npm run build

      # --- GitHub Pages Deployment Steps ---

      # 1. Upload the build artifact
      - name: â¬†ï¸ Upload Pages Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: './build' # Directory containing the static assets from the 'npm run build'

      # 2. Configure GitHub Pages environment
      - name: ğŸ“„ Setup Pages
        id: pages
        uses: actions/configure-pages@v5

      # 3. Deploy the artifact to GitHub Pages
      - name: ğŸš¢ Deploy to GitHub Pages
        uses: actions/deploy-pages@v4